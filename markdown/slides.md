<!-- .slide: data-background="images/doctor-strange.jpg" data-state="inverted faded" -->

<br><br><br><br><br><br>
# A @property to unlock the World

---

## December 2014

[![Screenshot of the announcement of the WhatTF on the W3C mailing list](images/WhatTF.jpg)](https://lists.w3.org/Archives/Public/www-style/2014Dec/0100.html)

---

<br><br><br>

> .I'm happy to introduce a new taskforce between the TAG and CSSWG named WhatTF. We are a taskforce(TF) that wants to define the CSS Box Tree(T) and its functionality(F).

[Rossen Atanassov](https://lists.w3.org/Archives/Public/www-style/2014Dec/0100.html)

---

<br><br><br>

> ...the
idea is that our current approach of delivering a new layout mode
every 5 years or so isn't sustainable; they're too complex and the
whole thing is too slow.

[Tab Atkins-Bittner](https://lists.w3.org/Archives/Public/www-style/2014Dec/0115.html)

---

<br><br><br>

> While there's still value in finding the highest-impact stuff in this
realm and standardizing it with CSS syntax, we feel that for CSS to
continue to be viable in the future, we need to open up these sorts of
APIs to developers more directly.

[Tab Atkins-Bittner](https://lists.w3.org/Archives/Public/www-style/2014Dec/0115.html)

<p class="fragment">(following the idea of the [extensible web manifesto](https://extensiblewebmanifesto.org/))</p>
---

## "WhatTF?"

> ...the name was too damned good of a pun to pass up. Hixie missed
out on the opportunity to use it when he started WHATWG; we had to
jump on that mailing-list address. ^_^

[Tab Atkins-Bittner](https://lists.w3.org/Archives/Public/www-style/2014Dec/0115.html)

---

## Houdini

> Let's just call it "Project Houdini".  Houdini was an illusionist, not a
magician.  He was a great explainer of anything claiming to be 'magic' and
belonged to a Scientific American committee which publicly offered a prize
to anyone who could demonstrate something supernatural.

[Brian Kardell](https://lists.w3.org/Archives/Public/public-wtf/2014Dec/0023.html)

---

## 2015, Sydney: The Inaugural Meeting

![Sydney 2015 Meeting Attendees](images/W3C%20Houdini%20Meeting%20Attendees.jpg) <!-- .element: class="comic-border" -->

---
<!-- .slide: data-transition="fade" -->

## How it started...

* Parser API
* Property and Value Extensions API
* Aliases and Custom Pseudo-classes <span style="visibility: hidden"> Custom Selectors</span>
* Font Metrics API
* Custom Layout
* Custom Paint
* Input Extensions
* Async Style

---
<!-- .slide: data-transition="fade" -->

## ...how it evolved

* Parser API
* Property and Value ~~Extensions~~ API + Typed OM
* ~~Aliases and Custom Pseudo-classes~~ Custom Selectors
* Font Metrics API
* ~~Custom Layout~~ Layout API
* ~~Custom Paint~~ Paint API
* ~~Input Extensions~~ Scroll Timeline
* ~~Async Style~~ Worklets

---
<!-- .slide: data-background="images/backgrounds/marvel-party.gif" data-state="inverted faded" -->

<br><br><br><br><br><br>
## And the Hype sets in

---
<!-- .slide: data-background="images/backgrounds/marvel-party.gif" data-state="inverted faded" -->

![](images/twitter.com_glazou_status_563906880515239936.png) <!-- .element: class="comic-border" -->

---
<!-- .slide: data-background="images/backgrounds/marvel-party.gif" data-state="inverted faded" -->

![](images/twitter.com_patrickbrosset_status_568690680463265792.png) <!-- .element: class="comic-border" -->

---
<!-- .slide: data-background="images/backgrounds/iron-man-hologram.gif" data-state="inverted faded" -->

<br><br><br><br><br><br>
## Experimental code got implemented

---

<br><br><br><br><br><br>
## Talks were given

![Surma at GoogleI/O 2016](images/Google-IO-2016-Houdini.jpg) <!-- .element: class="fly-in comic-border" -->  
![Una at CSSConf EU 2019](images/CSS-Conf-2019-Houdini.jpg) <!-- .element: class="fly-in comic-border" -->
---

## A new site was launched (2016)

![](images/twitter.com_DasSurma_status_761610700963872769.png) <!-- .element: class="comic-border" -->

---
<!-- .slide: data-transition="fade" -->

![](images/twitter.com_DasSurma_status_892394447459299328.png) <!-- .element: class="comic-border" -->

---
<!-- .slide: data-transition="fade" -->

<div style="transform-origin: top center; transform: scale(0.5)">
<iframe src="https://gitcdn.link/cdn/surma/ishoudinireadyyet.com/714a453b9f9ae73208952f110b0cbd2103b99b09/index.html" width="100%" frameborder="0" scrolling="0" style="aspect-ratio: 1;" class="comic-border"></iframe>

<p>August 2017 (Mozilla and Safari interested)</p>
</div>

---
<!-- .slide: data-transition="fade" -->

![](images/twitter.com_DasSurma_status_954798884122976256.png) <!-- .element: class="comic-border" -->

---
<!-- .slide: data-transition="fade" -->

![](images/twitter.com_DasSurma_status_978565861568020480.png) <!-- .element: class="comic-border" -->

---

## There are bumps here and there...

<video data-autoplay src="images/State%20of%20Houdini.mp4"></video> <!-- .element: class="comic-border" -->

---
<!-- .slide: data-transition="fade" -->

![](images/twitter.com_DasSurma_status_1052486500447862784.png) <!-- .element: class="comic-border" -->

---
<!-- .slide: data-transition="fade" -->

![](images/twitter.com_chicoxyzzy_status_1050292708441505792.png) <!-- .element: class="comic-border" -->

---
<!-- .slide: data-transition="fade" -->

<div style="transform-origin: top center; transform: scale(0.5)">
<iframe src="https://gitcdn.link/cdn/surma/ishoudinireadyyet.com/2e2f3daf7dfd223e3045d954cc1a712ccee0ce74/index.html" width="100%" frameborder="0" scrolling="0" style="aspect-ratio: 1.0;" class="comic-border"></iframe>

<p>November 2019 (3 green with Chromium)</p>
</div>

---
<!-- .slide: data-transition="fade" -->

![](images/twitter.com__SteffenR_status_1188822431546388481.png) <!-- .element: class="comic-border" -->

---
<!-- .slide: data-transition="fade" -->

<div style="transform-origin: top center; transform: scale(0.5)">
<iframe src="https://gitcdn.link/cdn/surma/ishoudinireadyyet.com/a5177c29715141d8981d8e784462f811aead6279/index.html" width="100%" frameborder="0" scrolling="0" style="aspect-ratio: 1;" class="comic-border"></iframe>

<p>January 2020 (Edge switch to Blink)</p>
</div>

---
<!-- .slide: data-transition="fade" -->

<div style="transform-origin: top center; transform: scale(0.5)">
<iframe src="https://gitcdn.link/cdn/surma/ishoudinireadyyet.com/cc54213d1f1e15590adb8311c174f4ce8787b6e2/index.html" width="100%" frameborder="0" scrolling="0" style="aspect-ratio: 0.9;" class="comic-border"></iframe>

<p>August 2020 (Mozilla back-paddling)</p>
</div>

---
<!-- .slide: data-transition="fade" -->

![](images/twitter.com_umaar_status_1297898312411078662.png) <!-- .element: class="comic-border" -->

---
<!-- .slide: data-transition="fade" -->

<div style="transform-origin: top center; transform: scale(0.5)">
<iframe src="https://gitcdn.link/cdn/surma/ishoudinireadyyet.com/02431d05a236577f3d4ee650bbe0b362b9f228ab/index.html" width="100%" frameborder="0" scrolling="0" style="aspect-ratio: 0.9;" class="comic-border"></iframe>

<p>May 2021 (just a layout reordering)</p>
</div>

---

<br><br><br><br><br><br>
## No more updates since then...

---

<br><br><br><br><br><br>
## Mozilla out of the game

(probably because of WebRender)

---

<br><br><br><br><br><br>
## Safari stuck

(probably because of man power)

---

<br><br><br><br><br><br>
## But also...

---

![](images/twitter.com_iamvdo.JPG) <!-- .element: class="comic-border" -->

---

<br><br><br>

> unfortunately we can‚Äôt really extend existing features. Speaking of box-shadow‚Äôs blur, it is for example impossible to create a directional blur, splitting it in two sub-properties --box-shadow-blur-x and --box-shadow-blur-y. As there is no way to ‚Äúhack‚Äù shadow drawing from browsers.

[Vincent de Oliveira](https://iamvdo.me/en/blog/css-houdini#so-real-magic-or-smoke-and-mirrors)

---

<br><br><br>

> even if the CSS Paint API seems ultramodern, it is nothing more than a performant version of -webkit-canvas() that exists since 2008, but got removed from Chrome.

[Vincent de Oliveira](https://iamvdo.me/en/blog/css-houdini#so-real-magic-or-smoke-and-mirrors)

---
<!-- .slide: data-state="canvas" -->

## Procedural backgrounds (Safari only)

```js
const ctx = document.getCSSCanvasContext('2d', 'snow', 1000, 1000);
/* draw in the canvas */
```

```html
<div></div>
```

```css
div {
  background-image: -webkit-canvas(snow);
}
```

<div style="width: 600px; height: 400px; margin: 0 auto; padding: 10px; background: #fff; border: 1px solid #000"><canvas id="canvas"></canvas></div>

---

> The drawing is executed in a canvas, [...] thus many limitations are emerging:

[Vincent de Oliveira](https://iamvdo.me/en/blog/css-houdini#so-real-magic-or-smoke-and-mirrors)

<br><br>

* no simple way to handle borders
* not really convenient to draw outside the background area
* no way to deal with texts
* nothing new to style form elements

---

> Regarding the CSS Layout API, only complete layout mode are achievable (like Flexbox or Grid). It‚Äôs a big step forward, but we‚Äôre not able to modify how CSS works.

[Vincent de Oliveira](https://iamvdo.me/en/blog/css-houdini#so-real-magic-or-smoke-and-mirrors)

<br><br>

* impossible to set sizes, nor margins, on one element
* nor to change its containing block or stacking context
* nor even to add new pseudo-elements or new entities 

---

<br><br><br>

> One of the main purpose of CSS Houdini is to be able to create polyfills [...] However, the vast majority of CSS is non-polyfillable

[Vincent de Oliveira](https://iamvdo.me/en/blog/css-houdini#so-real-magic-or-smoke-and-mirrors)

---

<br><br>

> Regarding the Animation Worklet API [...] WAAPI is, in my opinion, good enough to build performant animations  
To create a scroll-based timeline, I do prefer the Scroll-linked Animations specification, but that is not part of Houdini.

[Vincent de Oliveira](https://iamvdo.me/en/blog/css-houdini#so-real-magic-or-smoke-and-mirrors)

---

* ~~Parser API~~
* Property and Value API + Typed OM
* ~~Font Metrics API~~
* ~~Layout API~~ üëâüèª `grid-template-rows: masonry`
* Paint API üëâ `-webkit-canvas()` / `-moz-element()` / SVG
* ~~Animation Worklet~~ üëâ Scroll Timeline
* Worklets

---

![](images/twitter.com_DasSurma_status_1478425713703329805.png) <!-- .element: class="comic-border" -->

![](images/sarah-jessica-parker-shocked.gif) <!-- .element: class="comic-border" -->

---

<!-- .slide: data-background="images/backgrounds/iron-man-hungover.gif" data-state="inverted faded" -->

<br><br><br><br><br><br>
## Party is over

---

<br><br><br><br><br><br>

## So... is Houdini dead? üíÄ

The idea as a whole probably is, yes. <!-- .element: class="fragment" -->

But parts of it remain super helpful and desirable to have! <!-- .element: class="fragment" -->

---

<br><br><br><br><br>

talking about...

## The Properties and Values API ‚ú®

---

<br><br><br><br><br>

## `@property` + `@keyframes` + `calc()` = üíò

A "trio infernale" made in heaven! ‚òÅ

---

## Animating gradients

<style>
#css-animated-backgrounds div {
width: 100%;
height: 100%;
}
</style>

<div class="flex-row" style="width:78%">

<pre><code class="css">@property --multiplier {
  syntax: '&lt;number&gt;';
  inherits: false;
  initialValue: 0;
}</code></pre>

<pre><code class="css">@keyframes chart-open {
  from { 
    --multiplier: 0; }
  to   { 
    --multiplier: 1; }
}</code></pre>

</div>

<pre><code class="liveCoding css" data-livecoding-id="css-animated-backgrounds"
contenteditable>div {
  animation: chart-open 1000ms infinite;
  background-image: conic-gradient(
    blue calc(var(--multiplier) * 40%), 
    red calc(var(--multiplier) * 40%), 
    red calc(var(--multiplier) * 70%), 
    transparent calc(var(--multiplier) * 70%)
  );
  border-radius: 50%;
  filter: drop-shadow(10px 10px 10px #000);
}</code></pre>

<div id="css-animated-backgrounds" style="position: absolute; top: 0; right: 0; width: 400px; height: 400px; padding: 10px; background: #fff; border: 1px solid #000"><div></div></div>
---
## Automated Slideshows

<style>
#slideshow div {
  width: 800px; 
  height: 400px;
}
</style>

<pre style="margin-left: 0"><code class="css">@property --cross-fade {
  syntax: '&lt;number&gt;';
  inherits: false;
  initialValue: 0;
});</code></pre>

<pre style="margin-left: 0"><code class="css">@keyframes cross-fade {
  0% { --cross-fade: 0 }
  50% { --cross-fade: 1 }
  100% { --cross-fade: 0 }
}

.slideshow {
  background-image: -webkit-cross-fade(
    url('../images/iron-man.jpg'),
    url('../images/hawkeye.jpg'),
    calc(100% * var(--cross-fade)));
  background-size: cover;
  animation: cross-fade 10000ms infinite;
}</code></pre>

<div id="slideshow" style="position: absolute; right: 0; width: 820px; top: 250px; border: 10px solid #fff; background: #fff; outline: 1px solid #000"><div></div></div>
---
<style>
#modal .modal {
  position: fixed;
  top: 50%;
  right: 40vw;
  display: grid;
  align-items: center;
  margin: auto;
  padding: 20px 30px;
  transform: translate(50%, -50%);
  background: #fff;
  border: 2px solid black;
  box-shadow: 0 0 20px #0009;
}
#modal .content {
  grid-column: 1;
  grid-row: 1;
  width: 50vw;
  color: #ffb;
  zoom: var(--zoom);
  animation-name: fade-and-shrink;
  animation-duration: 8s;
  animation-iteration-count: infinite;
  animation-direction: alternate;
}
#modal .content + .content {
  width: 33vw;
  animation-delay: -4s;
}
#modal .content img {
  display: block;
}
</style>

<pre style="margin-left: 0"><code class="css">@property --zoom {
  syntax: '&lt;number&gt;';
  inherits: false;
  initialValue: 1;
});</code></pre>

<pre style="margin-left: 0"><code class="css">@keyframes fade-and-shrink {
  10%, 90% { opacity: 1 }
  20%, 80% { opacity: 0 }
  25%, 75% { --zoom: 1 }
  37.5%, 62.5% { --zoom: 0.1 }
}
.modal {
  display: grid;
  align-items: center;
}
.content {
  zoom: var(--zoom);
  animation: fade-and-shrink 8s infinite alternate;
}
.content + content {
  animation-delay: -4s;
}</code></pre>

<div id="modal" style="position: absolute; right: 0;"><div class="modal">
  <div class="content">
    <img src="images/thor.jpg">
  </div>
  <div class="content">
    <img src="images/black-widow.jpg">
  </div>
</div>
</div>

---

![](images/twitter_anatudor.JPG)

---
<pre><code class="liveCoding css" data-livecoding-id="modulo" contenteditable>@property --dividend {
  syntax: '&lt;integer&gt;'; inherits: true; initialValue: 0;
}
@property --divisor {
  syntax: '&lt;integer&gt;'; inherits: true; initialValue: 0;
}
@property --integerQuotient {
  syntax: '&lt;integer&gt;'; inherits: true; initialValue: 0;
}
@property --modulo {
  syntax: '&lt;number&gt;'; inherits: true; initialValue: 0;
}
.modulo {
  --dividend: 54;
  --divisor: 7;
  --integerQuotient: calc((var(--dividend) / var(--divisor)) - 0.5);
  --modulo: calc(
            (
              (var(--dividend) / var(--divisor))
              - var(--integerQuotient)
            ) * var(--divisor)
          ); }</code></pre>

<div id="modulo" style="position: absolute; right: 0;"><div class="modulo">modulo: </div></div>

[Modulo in CSS](https://codepen.io/Schepp/pen/Vwvooaj)

---

![](images/rockwind.JPG)

---

<br><br><br><br>
## Here's an idea:

Maybe we should stop trying to tackle the big things, but instead focus on the smaller things.

That might also benefit decision making at the browser makers.  <!-- .element: class="fragment" -->

---

<br><br><br>
## What can I do to push `@property` into more browsers?

* You can push browser vendors via their respective DevRels
* You can star and participate in their issue trackers ([Mozilla](https://bugzilla.mozilla.org/show_bug.cgi?id=1684605) / [WebKit](https://bugs.webkit.org/show_bug.cgi?id=189692))
* You could even help [crowd fund an implementation](https://www.igalia.com/open-prioritization/index)

---

<br><br><br><br><br>
## Thank you!


